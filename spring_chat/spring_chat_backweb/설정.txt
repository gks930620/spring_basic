
백엔드 서버는 jwt 검증 + stomp채팅 제공 만 하는거고 거기에 요청하는건
웹(물론 백엔드서버 프로젝트랑 같지만.. 그건 그냥 controller만 다른거고 실제로는 그냥 우리가 보는 브라우저가 클라이언트) 이랑 앱 이 알아서 요청 잘 하면 된다
이 때 앱은 postman처럼 header로 잘 요청하면 되는데   웹에서 jwt 저장하는게 http only 쿠키 방식,   localstroage등에서 잘 선택하기.

일단 부분부분적으로
1.백엔드서버가  jwt  생성 및 검증, stomp 채팅 기능하는거 만들기
2.웹(물론 백엔드서버랑 같은 프로젝트겠지만) 에서  서버에 jwt 잘 요청하게 하기
3. 앱에서  서버에 jwt 요청하게 하기


즉 같은 DB바라보면서 웹 앱이 같은 채팅룸 들어고 서로 채팅가능하게 하면됨
현재는 jwt_access_refresh 프로젝트 복사하고 설정만 변경한 상태..   gradle 추가부터 시작해보자 .

websocket 핸드쉐이크단계에서 jwt 인증하거나
STOMP 연결단계에서 인증하면 되는거고,     매번 메시지 보낼때마다 검사할 필요는 없다.
그리고 인증이 됐다고 하면 보낸사람 이름은  jwt가 아니라 보낼 때 html쪽에서 추가시키면 끝?


🔌 원리 설명

STOMP(WebSocket)는 기본적으로 TCP 기반의 지속 연결이에요.
그래서 브라우저 창을 닫거나, 뒤로 가기 해서 페이지를 벗어나면
→ 브라우저가 WebSocket 연결을 끊습니다.

그럼 서버(Spring)가 이를 감지해서 SessionDisconnectEvent 를 발행합니다:











